/**
 * London Family Travel Intelligence
 * English-speaking, family attractions, history kids can touch
 */

export function generateLondonTasks(familyProfile: any, daysUntilTrip: number) {
  const tasks = [];
  const kids = familyProfile.kids || [];
  const hasSchoolAge = kids.some((kid: any) => {
    const age = parseInt(kid.age);
    return age >= 5 && age <= 12;
  });

  // Tower of London with kids
  tasks.push({
    id: 'tower-of-london-strategy',
    title: 'Book Tower of London Early Entry',
    subtitle: 'Crown Jewels + Beefeater tours perfect for kids - book 9am slot to beat crowds',
    category: 'planning',
    status: 'incomplete',
    urgent: daysUntilTrip <= 21,
    isCustom: false,
    priority: 'high',
    daysBeforeTrip: 30,
    intelligence: {
      reasoning: [
        'ğŸ‘‘ Crown Jewels fascinate kids of all ages',
        'ğŸ›¡ï¸ Beefeater tours engaging for families',
        'ğŸ° Real castle with real history kids can touch',
        'â° Early entry 9am - crowds arrive after 11am'
      ].join('\n'),
      source: 'London family attractions'
    }
  });

  // Harry Potter studio tour
  if (hasSchoolAge) {
    tasks.push({
      id: 'harry-potter-studio-tour',
      title: 'Book Harry Potter Studio Tour (Book 3+ Months Ahead)',
      subtitle: 'Most popular London family attraction - sells out months in advance',
      category: 'planning',
      status: 'incomplete',
      urgent: daysUntilTrip <= 90,
      isCustom: false,
      priority: 'high',
      daysBeforeTrip: 90,
      intelligence: {
        reasoning: [
          'âš¡ Must-book 3+ months ahead - sells out instantly',
          'ğŸšŒ Includes round-trip bus from central London',
          'ğŸ¬ 3-4 hours total including travel time',
          'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Perfect for ages 6+ who know the movies'
        ].join('\n'),
        source: 'London family attractions'
      }
    });
  }

  // London Eye timing
  tasks.push({
    id: 'london-eye-timing',
    title: 'Book London Eye Sunset Slot',
    subtitle: 'Skip-the-line essential, sunset timing magical for families',
    category: 'planning',
    status: 'incomplete',
    urgent: false,
    isCustom: false,
    priority: 'medium',
    daysBeforeTrip: 21,
    intelligence: {
      reasoning: [
        'ğŸ¡ 30-minute ride with spectacular city views',
        'ğŸŒ… Sunset slots most magical for photos',
        'ğŸ« Skip-the-line tickets essential (saves 1+ hours)',
        'ğŸ‘¶ Great for all ages - enclosed pods, no scary parts'
      ].join('\n'),
      source: 'London family attractions'
    }
  });

  // Hyde Park playground
  tasks.push({
    id: 'hyde-park-playground',
    title: 'Plan Hyde Park Playground Visit',
    subtitle: 'Diana Memorial Playground - amazing for kids 2-12, plus Kensington Palace nearby',
    category: 'planning',
    status: 'incomplete',
    urgent: false,
    isCustom: false,
    priority: 'medium',
    daysBeforeTrip: 7,
    intelligence: {
      reasoning: [
        'ğŸ° Peter Pan themed playground with pirate ship',
        'ğŸ‘¸ Near Kensington Palace (Diana\'s home)',
        'ğŸ¦† Serpentine Lake for duck feeding',
        'â˜• Hyde Park cafÃ©s for parent coffee breaks'
      ].join('\n'),
      source: 'London family activities'
    }
  });

  // West End show
  tasks.push({
    id: 'west-end-family-show',
    title: 'Book Family-Friendly West End Show',
    subtitle: 'Lion King, Frozen, or Matilda - book 2-3 months ahead for good seats',
    category: 'planning',
    status: 'incomplete',
    urgent: daysUntilTrip <= 60,
    isCustom: false,
    priority: 'medium',
    daysBeforeTrip: 60,
    intelligence: {
      reasoning: [
        'ğŸ­ Lion King: Best for all ages, amazing costumes',
        'â„ï¸ Frozen: Perfect for Disney fans',
        'ğŸ“š Matilda: Great for book-loving kids 6+',
        'ğŸŸï¸ Book 2-3 months ahead for reasonable prices'
      ].join('\n'),
      source: 'London West End intelligence'
    }
  });

  // Underground/tube with kids
  tasks.push({
    id: 'london-tube-strategy',
    title: 'Get Oyster Cards for Family',
    subtitle: 'Kids under 11 free, contactless payment, much cheaper than individual tickets',
    category: 'travel',
    status: 'incomplete',
    urgent: false,
    isCustom: false,
    priority: 'medium',
    daysBeforeTrip: 7,
    intelligence: {
      reasoning: [
        'ğŸ« Kids under 11 travel free on all transport',
        'ğŸ’³ Oyster cards or contactless much cheaper',
        'ğŸš‡ Tube mostly stroller accessible with lifts',
        'ğŸšŒ Buses great for sightseeing + stroller friendly'
      ].join('\n'),
      source: 'London transport intelligence'
    }
  });

  return tasks;
}